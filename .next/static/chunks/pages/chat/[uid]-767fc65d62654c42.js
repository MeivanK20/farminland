(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{5831:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/[uid]",function(){return n(5229)}])},895:function(e,t,n){"use strict";n.d(t,{I:function(){return u},db:function(){return d}});var r=n(3977),a=n(2370),i=n(9828);let s=(0,r.ZF)({apiKey:"AIzaSyARkaxOazpDx4wcJp1QdB5rf-Zp_JkTAN8",authDomain:"farminland-471ed.firebaseapp.com",projectId:"farminland-471ed",storageBucket:"farminland-471ed.appspot.com",messagingSenderId:"827181575858",appId:"1:827181575858:web:65180613dea356a9e563ab"}),u=(0,a.v0)(s),d=(0,i.ad)(s)},5229:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(5893),a=n(1163),i=n(7294),s=n(895),u=n(9828),d=n(2370);function o(e,t){return[e,t].sort().join("_")}function c(){let{uid:e}=(0,a.useRouter)().query,[t,n]=(0,i.useState)(null),[c,l]=(0,i.useState)([]),[f,p]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=(0,d.Aj)(s.I,e=>{n(e)});return()=>e()},[]),(0,i.useEffect)(()=>{if(!e||!t)return;let n=o(t.uid,e),r=(0,u.IO)((0,u.hJ)(s.db,"chats",n,"messages"),(0,u.Xo)("timestamp","asc")),a=(0,u.cf)(r,e=>{l(e.docs.map(e=>e.data()))});return()=>a()},[e,t]);let h=async()=>{if(!f.trim())return;let n=o(t.uid,e);await (0,u.ET)((0,u.hJ)(s.db,"chats",n,"messages"),{senderId:t.uid,text:f,timestamp:(0,u.Bt)()}),p("")};return t?(0,r.jsxs)("div",{style:{padding:20},children:[(0,r.jsx)("h2",{children:"Discussion"}),(0,r.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto",marginBottom:"1em"},children:c.map((e,n)=>(0,r.jsx)("div",{style:{textAlign:e.senderId===t.uid?"right":"left"},children:(0,r.jsx)("span",{style:{background:"#eee",padding:6,borderRadius:6},children:e.text})},n))}),(0,r.jsx)("input",{value:f,onChange:e=>p(e.target.value),placeholder:"Votre message...",style:{width:"80%"}}),(0,r.jsx)("button",{onClick:h,children:"Envoyer"})]}):(0,r.jsx)("p",{children:"Connexion requise"})}},1163:function(e,t,n){e.exports=n(3035)}},function(e){e.O(0,[16,290,554,888,774,179],function(){return e(e.s=5831)}),_N_E=e.O()}]);